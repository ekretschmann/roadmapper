<section data-ng-controller="RoadmapsController" data-ng-init="findOne()">
    <div class="pull-right" data-ng-show="((authentication.user) && (authentication.user._id == roadmap.user._id))">
        <a class="btn btn-primary" data-ng-click="remove();">
            <i class="glyphicon glyphicon-trash"></i>
        </a>
    </div>

    <div class="page-header">
        <h1>Roadmap {{roadmap.name}}</h1>


    </div>


    <div class="container">



        <h3 style="margin-bottom: 20px">Epics</h3>

        <div class="row">


            <div class="col-xs-12" style="text-align: right">
                <a class="btn btn-primary" data-ng-click="run();">
                    run simulation
                </a>
            </div>


            <div class="col-xs-12 ">


                <div class="form-group">
                    <label class=" control-label">Add a new Epic</label>

                <div class="input-group">


                    <input class="form-control" type="text" data-ng-model="epicName">

                    <span class="input-group-btn">
                <a class="btn btn-primary" href="" data-ng-click="addEpic()">
                    <i class="glyphicon glyphicon-plus-sign"></i>
                </a>
                    </span>
                </div>
                </div>
            </div>
        </div>


        <div class="row" data-ng-if="roadmap.epics.length === 0">
            <div class="col-xs-12">
                There are no epics for this project. Please add one.
            </div>
        </div>

        <div data-as-sortable="dragControlListeners" data-ng-model="roadmap.epics" style="margin-top: 10px">
            <div class="row" data-ng-repeat="epic in roadmap.epics" data-as-sortable-item>
                <div data-as-sortable-item-handle style="padding-left: 10px; padding-top: 5px; padding-bottom: 5px">

                    <div class="col-xs-1" style="padding-top: 15px">
                        <a href="" data-ng-click="removeEpic(epic)">
                            <i class="glyphicon glyphicon-minus-sign "></i>
                        </a>


                    </div>

                    <div class="col-xs-3" style="margin-top: 10px; margin-bottom: 10px">
                        <input class="form-control" type="text" data-ng-model="epic.name" data-ng-blur="update()">
                    </div>

                    <div class="col-xs-1" style="padding-top: 15px;">
                        Est:
                    </div>

                    <div class="col-xs-3" style="margin-top: 10px; margin-bottom: 10px">
                        <input class="form-control" type="number" data-ng-model="epic.estimated"  data-ng-blur="update()">
                    </div>

                    <div class="col-xs-1" style="padding-top: 15px;">
                        Deviation:
                    </div>

                    <div class="col-xs-3" style="margin-top: 10px; margin-bottom: 10px">
                        <input class="form-control" type="number" data-ng-model="epic.deviation"  data-ng-blur="update()">
                    </div>
                </div>
            </div>


        </div>

</section>

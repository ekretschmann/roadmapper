<section data-ng-controller="ProjectsController" data-ng-init="findOne()">
    <div class="page-header">
        <h1 data-ng-bind="project.name"></h1>
    </div>


    <div class="container">


        <h3>Epics</h3>

        <div class="row">
            <div class="col-xs-12">
                <label>Add a new Epic</label>
                <input type="text" data-ng-model="epicName">
                <a class="btn btn-primary" href="" data-ng-click="addEpic()">
                    <i class="glyphicon glyphicon-plus-sign"></i>
                </a>
            </div>
        </div>

        <div class="row" data-ng-if="project.epics.length === 0">
            <div class="col-xs-12">
                There are no epics for this project. Please add one.
            </div>
        </div>

        <div data-as-sortable="dragControlListeners" data-ng-model="project.epics" style="margin-top: 10px">
            <div class="row"  data-ng-repeat="epic in project.epics" data-as-sortable-item>
                <div data-as-sortable-item-handle style="padding-left: 10px; padding-top: 5px; padding-bottom: 5px">
                    <a href="" data-ng-click="removeEpic(epic)">
                        <i class="glyphicon glyphicon-minus-sign "></i>
                    </a>
                    {{epic}}
                </div>
            </div>
        </div>


    </div>

    <div class="container">

        <h3>Roadmaps</h3>

        <div class="row">
            <div class="col-xs-12" style="margin-top: 10px">
                <label>Add a new Roadmap</label>
                <input type="text" data-ng-model="roadmapName">
                <a class="btn btn-primary" href="" data-ng-click="addRoadmap()">
                    <i class="glyphicon glyphicon-plus-sign"></i>
                </a>
            </div>


            <div data-ng-if="project.roadmaps.length === 0">
                <div class="col-xs-12">
                    <div class="alert alert-warning" style="margin-top: 10px">
                        There are no roadmaps for this project. Please add one.
                    </div>
                </div>
            </div>

            <div data-ng-repeat="map in project.roadmaps" style="margin-top: 20px">

                <div data-ng-controller="RoadmapsController" data-ng-init="findById(map)">
                    <div class="col-xs-2" style="padding-top: 10px">
                        {{roadmap.created | date:shortDate}}
                    </div>

                    <div class="col-xs-2" style="padding-top: 10px">
                        <a href="/#!/roadmaps/{{roadmap._id}}">{{roadmap.name}}</a>
                    </div>

                    <div class="col-xs-8" style="padding-top: 10px">
                        {{roadmap.epics.length}} epics
                    </div>
                </div>

            </div>
        </div>
    </div>


</section>
